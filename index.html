<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLM Dashboard with Binary Tree</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #4a6bff;
            --secondary-color: #f8f9fa;
            --accent-color: #ff6b6b;
            --text-color: #333;
            --light-text: #6c757d;
            --border-color: #dee2e6;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
            color: var(--text-color);
        }
        
        .dashboard-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            background-color: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
        }
        
        .logo {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
        }
        
        .logo h2 {
            margin: 0;
            color: var(--primary-color);
        }
        
        .menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .menu-item {
            padding: 12px 25px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover {
            background-color: var(--secondary-color);
        }
        
        .menu-item.active {
            background-color: rgba(74, 107, 255, 0.1);
            border-left: 3px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .menu-item i {
            margin-right: 10px;
            font-size: 18px;
        }
        
        /* Main Content Styles */
        .main-content {
            padding: 20px;
            background-color: var(--secondary-color);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .page-title h1 {
            margin: 0;
            color: var(--primary-color);
        }
        
        .user-profile {
            display: flex;
            align-items: center;
        }
        
        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .card h3 {
            margin-top: 0;
            color: var(--light-text);
            font-size: 14px;
        }
        
        .card .value {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .card .trend {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: var(--light-text);
        }
        
        .trend.up {
            color: #28a745;
        }
        
        .trend.down {
            color: #dc3545;
        }
        
        /* Content Sections */
        .content-section {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .content-section.active {
            display: block;
        }
        
        /* Chart Container */
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            margin: 0;
        }
        
        .chart-actions select, .chart-actions button {
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            margin-left: 5px;
        }
        
        /* Tree Visualization */
        .tree-container {
            background-color: white;
            border-radius: 10px;
            height: 600px;
            overflow: auto;
        }
        
        .node circle {
            fill: #fff;
            stroke: steelblue;
            stroke-width: 3px;
        }
        
        .node text {
            font: 12px sans-serif;
        }
        
        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 2px;
        }
        
        .node.highlighted circle {
            fill: #ffeb3b;
            stroke: #ff9800;
        }
        
        /* Leaderboard Styles */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .leaderboard-table th, .leaderboard-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .leaderboard-table th {
            background-color: var(--secondary-color);
            font-weight: 600;
        }
        
        .leaderboard-table tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }
        
        /* Learning Section */
        .learning-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .learning-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s;
        }
        
        .learning-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .learning-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .learning-card-body {
            padding: 15px;
        }
        
        /* Settings Form */
        .settings-form .form-group {
            margin-bottom: 20px;
        }
        
        .settings-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .settings-form input, .settings-form select, .settings-form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        .settings-form button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .dashboard-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h2>MLM Dashboard</h2>
            </div>
            <ul class="menu">
                <li class="menu-item" data-section="home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </li>
                <li class="menu-item active" data-section="binary-tree">
                    <i class="fas fa-project-diagram"></i>
                    <span>Binary Tree</span>
                </li>
                <li class="menu-item" data-section="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </li>
                <li class="menu-item" data-section="transactions">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Transactions / Payout</span>
                </li>
                <li class="menu-item" data-section="leaderboard">
                    <i class="fas fa-trophy"></i>
                    <span>Leaderboard</span>
                </li>
                <li class="menu-item" data-section="learning">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Learning</span>
                </li>
                <li class="menu-item" data-section="add-round">
                    <i class="fas fa-plus-circle"></i>
                    <span>Add Round / Sales</span>
                </li>
                <li class="menu-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </li>
            </ul>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <div class="page-title">
                    <h1 id="main-title">Binary MLM Dashboard</h1>
                </div>
                <div class="user-profile">
                    <img src="https://via.placeholder.com/40" alt="User">
                    <span>Admin User</span>
                </div>
            </div>
            
            <!-- Home Section -->
            <div id="home" class="content-section">
                <div class="dashboard-cards">
                    <div class="card">
                        <h3>Total Members</h3>
                        <div class="value">1,248</div>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i> 12% from last month
                        </div>
                    </div>
                    <div class="card">
                        <h3>Active Members</h3>
                        <div class="value">892</div>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i> 8% from last month
                        </div>
                    </div>
                    <div class="card">
                        <h3>This Month Sales</h3>
                        <div class="value">$24,750</div>
                        <div class="trend down">
                            <i class="fas fa-arrow-down"></i> 5% from last month
                        </div>
                    </div>
                    <div class="card">
                        <h3>Total Commission</h3>
                        <div class="value">$8,325</div>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i> 3% from last month
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <h2 class="chart-title">Sales & Recruitment Trends</h2>
                        <div class="chart-actions">
                            <select id="time-period">
                                <option value="30">Last 30 Days</option>
                                <option value="90">Last 90 Days</option>
                                <option value="365">This Year</option>
                            </select>
                        </div>
                    </div>
                    <canvas id="salesChart" height="300"></canvas>
                </div>
            </div>
            
            <!-- Binary Tree Section -->
            <div id="binary-tree" class="content-section active">
                <div class="chart-header">
                    <h2 class="chart-title">Network Tree Visualization</h2>
                    <div class="chart-actions">
                        <button id="zoomIn"><i class="fas fa-search-plus"></i> Zoom In</button>
                        <button id="zoomOut"><i class="fas fa-search-minus"></i> Zoom Out</button>
                        <button id="resetZoom"><i class="fas fa-expand"></i> Reset</button>
                    </div>
                </div>
                <div class="tree-container" id="tree-container"></div>
                
                <div class="chart-container" style="margin-top: 20px;">
                    <div class="chart-header">
                        <h2 class="chart-title">Add New Member</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <div class="form-group">
                                <label for="userId">User ID</label>
                                <input type="text" id="userId" placeholder="Enter user ID">
                            </div>
                            <div class="form-group">
                                <label for="userName">Name</label>
                                <input type="text" id="userName" placeholder="Enter name">
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label for="sponsorId">Sponsor ID</label>
                                <input type="text" id="sponsorId" placeholder="Enter sponsor ID">
                            </div>
                            <div class="form-group">
                                <label for="position">Position</label>
                                <select id="position">
                                    <option value="left">Left</option>
                                    <option value="right">Right</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button id="addUser" style="margin-top: 15px; padding: 10px 20px;">
                        <i class="fas fa-user-plus"></i> Add User
                    </button>
                </div>
            </div>
            
            <!-- Reports Section -->
            <div id="reports" class="content-section">
                <h2>Reports</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Team Growth</h3>
                        </div>
                        <canvas id="teamGrowthChart" height="250"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Commission Breakdown</h3>
                        </div>
                        <canvas id="commissionChart" height="250"></canvas>
                    </div>
                </div>
                
                <div class="chart-container" style="margin-top: 20px;">
                    <div class="chart-header">
                        <h3>Detailed Activity Report</h3>
                        <div class="chart-actions">
                            <select id="report-type">
                                <option value="recruitment">Recruitment</option>
                                <option value="sales">Sales</option>
                                <option value="commission">Commission</option>
                            </select>
                            <button id="export-report"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>New Members</th>
                                    <th>Sales Volume</th>
                                    <th>Commission</th>
                                    <th>Active Users</th>
                                </tr>
                            </thead>
                            <tbody id="report-data">
                                <!-- Data will be inserted here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Transactions Section -->
            <div id="transactions" class="content-section">
                <h2>Transactions & Payouts</h2>
                <div class="dashboard-cards">
                    <div class="card">
                        <h3>Total Payouts</h3>
                        <div class="value">$8,325</div>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i> 12% from last month
                        </div>
                    </div>
                    <div class="card">
                        <h3>Pending Payouts</h3>
                        <div class="value">$2,150</div>
                        <div class="trend down">
                            <i class="fas fa-arrow-down"></i> 5% from last month
                        </div>
                    </div>
                    <div class="card">
                        <h3>Next Payout Date</h3>
                        <div class="value">May 15</div>
                        <div class="trend">
                            <i class="fas fa-calendar-alt"></i> 5 days remaining
                        </div>
                    </div>
                    <div class="card">
                        <h3>Average Payout</h3>
                        <div class="value">$245</div>
                        <div class="trend up">
                            <i class="fas fa-arrow-up"></i> 8% from last month
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Transaction History</h3>
                        <div class="chart-actions">
                            <select id="transaction-filter">
                                <option value="all">All Transactions</option>
                                <option value="payouts">Payouts</option>
                                <option value="purchases">Purchases</option>
                            </select>
                        </div>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>User ID</th>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="transaction-data">
                                <!-- Data will be inserted here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Leaderboard Section -->
            <div id="leaderboard" class="content-section">
                <h2>Leaderboard</h2>
                <div class="dashboard-cards">
                    <div class="card">
                        <h3>Top Recruiter</h3>
                        <div class="value">Sarah Johnson</div>
                        <div class="trend">
                            <i class="fas fa-users"></i> 42 new members
                        </div>
                    </div>
                    <div class="card">
                        <h3>Top Earner</h3>
                        <div class="value">Michael Chen</div>
                        <div class="trend">
                            <i class="fas fa-dollar-sign"></i> $3,450 this month
                        </div>
                    </div>
                    <div class="card">
                        <h3>Fastest Growing</h3>
                        <div class="value">Emma Wilson</div>
                        <div class="trend up">
                            <i class="fas fa-chart-line"></i> 200% growth
                        </div>
                    </div>
                    <div class="card">
                        <h3>Most Active Team</h3>
                        <div class="value">West Region</div>
                        <div class="trend">
                            <i class="fas fa-trophy"></i> 85% participation
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Top Performers</h3>
                        <div class="chart-actions">
                            <select id="leaderboard-type">
                                <option value="recruiters">Top Recruiters</option>
                                <option value="earners">Top Earners</option>
                                <option value="teams">Top Teams</option>
                            </select>
                        </div>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Name</th>
                                    <th>User ID</th>
                                    <th>Team</th>
                                    <th>Recruits</th>
                                    <th>Sales</th>
                                    <th>Commission</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-data">
                                <!-- Data will be inserted here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Learning Section -->
            <div id="learning" class="content-section">
                <h2>Learning Resources</h2>
                <div class="learning-cards">
                    <div class="learning-card">
                        <img src="https://via.placeholder.com/300x150?text=MLM+Basics" alt="MLM Basics">
                        <div class="learning-card-body">
                            <h3>MLM Basics</h3>
                            <p>Learn the fundamentals of network marketing and how to build your team.</p>
                            <button style="margin-top: 10px;">Start Course</button>
                        </div>
                    </div>
                    <div class="learning-card">
                        <img src="https://via.placeholder.com/300x150?text=Sales+Techniques" alt="Sales Techniques">
                        <div class="learning-card-body">
                            <h3>Sales Techniques</h3>
                            <p>Master the art of selling and increase your conversion rates.</p>
                            <button style="margin-top: 10px;">Start Course</button>
                        </div>
                    </div>
                    <div class="learning-card">
                        <img src="https://via.placeholder.com/300x150?text=Team+Building" alt="Team Building">
                        <div class="learning-card-body">
                            <h3>Team Building</h3>
                            <p>Strategies for recruiting and motivating your downline team.</p>
                            <button style="margin-top: 10px;">Start Course</button>
                        </div>
                    </div>
                    <div class="learning-card">
                        <img src="https://via.placeholder.com/300x150?text=Advanced+Strategies" alt="Advanced Strategies">
                        <div class="learning-card-body">
                            <h3>Advanced Strategies</h3>
                            <p>Take your MLM business to the next level with these proven methods.</p>
                            <button style="margin-top: 10px;">Start Course</button>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3>Recent Webinars</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div style="border: 1px solid var(--border-color); border-radius: 8px; padding: 15px;">
                            <h4>Monthly Strategy Session</h4>
                            <p><i class="far fa-calendar-alt"></i> May 10, 2023 | 2:00 PM EST</p>
                            <button style="margin-top: 10px;">Register Now</button>
                        </div>
                        <div style="border: 1px solid var(--border-color); border-radius: 8px; padding: 15px;">
                            <h4>Product Training</h4>
                            <p><i class="far fa-calendar-alt"></i> May 15, 2023 | 4:00 PM EST</p>
                            <button style="margin-top: 10px;">Register Now</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Add Round/Sales Section -->
            <div id="add-round" class="content-section">
                <h2>Add Sales Round</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div>
                        <div class="form-group">
                            <label for="round-name">Round Name</label>
                            <input type="text" id="round-name" placeholder="e.g., Summer Promotion 2023">
                        </div>
                        <div class="form-group">
                            <label for="start-date">Start Date</label>
                            <input type="date" id="start-date">
                        </div>
                        <div class="form-group">
                            <label for="end-date">End Date</label>
                            <input type="date" id="end-date">
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="target-amount">Target Amount ($)</label>
                            <input type="number" id="target-amount" placeholder="5000">
                        </div>
                        <div class="form-group">
                            <label for="bonus-percentage">Bonus Percentage</label>
                            <input type="number" id="bonus-percentage" placeholder="10">
                        </div>
                        <div class="form-group">
                            <label for="round-description">Description</label>
                            <textarea id="round-description" rows="3"></textarea>
                        </div>
                    </div>
                </div>
                <button id="create-round" style="margin-top: 20px; padding: 10px 20px;">
                    <i class="fas fa-plus-circle"></i> Create Sales Round
                </button>
                
                <div style="margin-top: 30px;">
                    <h3>Active Sales Rounds</h3>
                    <div style="overflow-x: auto; margin-top: 15px;">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Round Name</th>
                                    <th>Period</th>
                                    <th>Target</th>
                                    <th>Progress</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="active-rounds">
                                <!-- Data will be inserted here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Settings Section -->
            <div id="settings" class="content-section">
                <h2>Settings</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div>
                        <h3>Profile Settings</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label for="profile-name">Full Name</label>
                                <input type="text" id="profile-name" value="Admin User">
                            </div>
                            <div class="form-group">
                                <label for="profile-email">Email</label>
                                <input type="email" id="profile-email" value="admin@mlmcompany.com">
                            </div>
                            <div class="form-group">
                                <label for="profile-phone">Phone</label>
                                <input type="tel" id="profile-phone" value="+1 (555) 123-4567">
                            </div>
                            <button id="save-profile">Save Profile</button>
                        </div>
                        
                        <h3 style="margin-top: 30px;">Change Password</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label for="current-password">Current Password</label>
                                <input type="password" id="current-password">
                            </div>
                            <div class="form-group">
                                <label for="new-password">New Password</label>
                                <input type="password" id="new-password">
                            </div>
                            <div class="form-group">
                                <label for="confirm-password">Confirm Password</label>
                                <input type="password" id="confirm-password">
                            </div>
                            <button id="change-password">Change Password</button>
                        </div>
                    </div>
                    <div>
                        <h3>System Preferences</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label for="timezone">Timezone</label>
                                <select id="timezone">
                                    <option>Eastern Time (ET)</option>
                                    <option selected>Central Time (CT)</option>
                                    <option>Mountain Time (MT)</option>
                                    <option>Pacific Time (PT)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="date-format">Date Format</label>
                                <select id="date-format">
                                    <option>MM/DD/YYYY</option>
                                    <option selected>DD/MM/YYYY</option>
                                    <option>YYYY-MM-DD</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="notifications">Email Notifications</label>
                                <select id="notifications">
                                    <option selected>All Notifications</option>
                                    <option>Important Only</option>
                                    <option>None</option>
                                </select>
                            </div>
                            <button id="save-preferences">Save Preferences</button>
                        </div>
                        
                        <h3 style="margin-top: 30px;">Security</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="two-factor" checked> Enable Two-Factor Authentication
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="login-alerts" checked> Receive Login Alerts
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="activity-emails"> Weekly Activity Summary
                                </label>
                            </div>
                            <button id="save-security">Save Security Settings</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample MLM data structure
        let mlmData = {
            id: "1",
            name: "Root User",
            position: "root",
            children: []
        };

        // Current zoom transform for the tree
        let currentTransform = d3.zoomIdentity;

        // Initialize the tree visualization
        function initTree() {
            const container = document.getElementById('tree-container');
            container.innerHTML = '';
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            const svg = d3.select("#tree-container")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .call(d3.zoom()
                    .scaleExtent([0.5, 2])
                    .on("zoom", function(event) {
                        currentTransform = event.transform;
                        svgGroup.attr("transform", event.transform);
                    }))
                .append("g");
            
            const svgGroup = svg.append("g");
            
            // Create a hierarchy from the MLM data
            const root = d3.hierarchy(mlmData, d => d.children);
            
            // Tree layout
            const treeLayout = d3.tree().size([width - 100, height - 100]);
            treeLayout(root);
            
            // Draw links
            svgGroup.selectAll(".link")
                .data(root.links())
                .enter()
                .append("path")
                .attr("class", "link")
                .attr("d", d3.linkVertical()
                    .x(d => d.x)
                    .y(d => d.y));
            
            // Create node groups
            const node = svgGroup.selectAll(".node")
                .data(root.descendants())
                .enter()
                .append("g")
                .attr("class", d => "node" + (d.data.position === "root" ? " highlighted" : ""))
                .attr("transform", d => `translate(${d.x},${d.y})`);
            
            // Add circles to nodes
            node.append("circle")
                .attr("r", 20);
            
            // Add text to nodes
            node.append("text")
                .attr("dy", ".35em")
                .attr("y", d => d.children ? -30 : 30)
                .style("text-anchor", "middle")
                .text(d => `${d.data.name}\nID: ${d.data.id}`);
        }

        // Zoom functions
        function zoomIn() {
            currentTransform.k *= 1.2;
            d3.select("#tree-container svg g").attr("transform", currentTransform);
        }
        
        function zoomOut() {
            currentTransform.k /= 1.2;
            d3.select("#tree-container svg g").attr("transform", currentTransform);
        }
        
        function resetZoom() {
            currentTransform = d3.zoomIdentity;
            d3.select("#tree-container svg g").attr("transform", currentTransform);
        }

        // Add sample data to the tree
        function addSampleData() {
            // Level 1
            addUser("2", "Left Leg User", "1", "left");
            addUser("3", "Right Leg User", "1", "right");
            
            // Level 2
            addUser("4", "Left-Left User", "2", "left");
            addUser("5", "Left-Right User", "2", "right");
            addUser("6", "Right-Left User", "3", "left");
            addUser("7", "Right-Right User", "3", "right");
            
            // Level 3
            addUser("8", "LL-Left User", "4", "left");
            addUser("9", "LL-Right User", "4", "right");
            addUser("10", "LR-Left User", "5", "left");
            addUser("11", "LR-Right User", "5", "right");
            addUser("12", "RL-Left User", "6", "left");
            addUser("13", "RL-Right User", "6", "right");
            addUser("14", "RR-Left User", "7", "left");
            addUser("15", "RR-Right User", "7", "right");
        }

        // Add a new user to the MLM tree
        function addUser(userId, userName, sponsorId, position) {
            // Find the sponsor in the tree
            const sponsor = findNode(mlmData, sponsorId);
            
            if (!sponsor) {
                alert("Sponsor not found!");
                return false;
            }
            
            // Check if the position is already taken
            if (position === "left" && sponsor.children && sponsor.children[0]) {
                alert("Left position already occupied!");
                return false;
            }
            
            if (position === "right" && sponsor.children && sponsor.children[1]) {
                alert("Right position already occupied!");
                return false;
            }
            
            // Create new user
            const newUser = {
                id: userId,
                name: userName,
                position: position,
                children: []
            };
            
            // Add to the appropriate position
            if (position === "left") {
                if (!sponsor.children) sponsor.children = [];
                sponsor.children[0] = newUser;
            } else {
                if (!sponsor.children) sponsor.children = [null];
                sponsor.children[1] = newUser;
            }
            
            // Redraw the tree
            initTree();
            return true;
        }

        // Recursive function to find a node by ID
        function findNode(node, id) {
            if (node.id === id) return node;
            
            if (node.children) {
                for (const child of node.children) {
                    if (child) {
                        const found = findNode(child, id);
                        if (found) return found;
                    }
                }
            }
            
            return null;
        }

        // Initialize sales chart
        function initSalesChart() {
            const ctx = document.getElementById('salesChart').getContext('2d');
            const salesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 30}, (_, i) => i + 1),
                    datasets: [
                        {
                            label: 'New Members',
                            data: [50, 75, 60, 90, 120, 150, 130, 160, 180, 200, 
                                   190, 210, 225, 200, 180, 160, 140, 120, 100, 90, 
                                   80, 70, 75, 85, 95, 110, 125, 140, 150, 160],
                            borderColor: '#4a6bff',
                            backgroundColor: 'rgba(74, 107, 255, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Sales Volume ($)',
                            data: [2000, 2500, 3000, 3500, 4000, 4500, 5000, 5500, 6000, 6500, 
                                   7000, 7500, 8000, 7500, 7000, 6500, 6000, 5500, 5000, 4500, 
                                   4000, 3500, 3000, 3500, 4000, 4500, 5000, 5500, 6000, 6500],
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Initialize team growth chart
        function initTeamGrowthChart() {
            const ctx = document.getElementById('teamGrowthChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'New Members',
                        data: [120, 150, 180, 210, 240, 270],
                        backgroundColor: 'rgba(74, 107, 255, 0.7)',
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false,
                        }
                    }
                }
            });
        }

        // Initialize commission chart
        function initCommissionChart() {
            const ctx = document.getElementById('commissionChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Direct Sales', 'Team Sales', 'Bonus', 'Leadership'],
                    datasets: [{
                        data: [3000, 4500, 1500, 1000],
                        backgroundColor: [
                            '#4a6bff',
                            '#ff6b6b',
                            '#28a745',
                            '#ffc107'
                        ],
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }

        // Generate sample report data
        function generateReportData() {
            const tbody = document.getElementById('report-data');
            tbody.innerHTML = '';
            
            for (let i = 1; i <= 10; i++) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${date.toLocaleDateString()}</td>
                    <td>${Math.floor(Math.random() * 20) + 5}</td>
                    <td>$${(Math.random() * 5000 + 1000).toFixed(2)}</td>
                    <td>$${(Math.random() * 1500 + 300).toFixed(2)}</td>
                    <td>${Math.floor(Math.random() * 50) + 50}</td>
                `;
                tbody.appendChild(row);
            }
        }

        // Generate sample transaction data
        function generateTransactionData() {
            const tbody = document.getElementById('transaction-data');
            tbody.innerHTML = '';
            
            const types = ['Payout', 'Purchase', 'Bonus'];
            const statuses = ['Completed', 'Pending', 'Failed'];
            
            for (let i = 1; i <= 10; i++) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                
                const type = types[Math.floor(Math.random() * types.length)];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${date.toLocaleDateString()}</td>
                    <td>${Math.floor(Math.random() * 1000) + 100}</td>
                    <td>User ${Math.floor(Math.random() * 1000) + 100}</td>
                    <td>${type}</td>
                    <td>$${(Math.random() * 500 + 50).toFixed(2)}</td>
                    <td>${status}</td>
                `;
                tbody.appendChild(row);
            }
        }

        // Generate sample leaderboard data
        function generateLeaderboardData() {
            const tbody = document.getElementById('leaderboard-data');
            tbody.innerHTML = '';
            
            const names = ['Sarah Johnson', 'Michael Chen', 'Emma Wilson', 'David Lee', 'Jessica Brown'];
            const teams = ['North', 'South', 'East', 'West'];
            
            for (let i = 0; i < 5; i++) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${i + 1}</td>
                    <td>${names[i]}</td>
                    <td>${Math.floor(Math.random() * 1000) + 100}</td>
                    <td>${teams[Math.floor(Math.random() * teams.length)]}</td>
                    <td>${Math.floor(Math.random() * 50) + 10}</td>
                    <td>$${(Math.random() * 5000 + 1000).toFixed(2)}</td>
                    <td>$${(Math.random() * 1500 + 300).toFixed(2)}</td>
                `;
                tbody.appendChild(row);
            }
        }

        // Generate sample active rounds data
        function generateActiveRoundsData() {
            const tbody = document.getElementById('active-rounds');
            tbody.innerHTML = '';
            
            const rounds = [
                { name: 'Summer Promotion 2023', start: '2023-06-01', end: '2023-08-31', target: 50000, progress: 65 },
                { name: 'New Member Drive', start: '2023-07-15', end: '2023-08-15', target: 200, progress: 42 },
                { name: 'Product Launch', start: '2023-08-01', end: '2023-09-30', target: 30000, progress: 18 }
            ];
            
            rounds.forEach(round => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${round.name}</td>
                    <td>${round.start} to ${round.end}</td>
                    <td>$${round.target.toLocaleString()}</td>
                    <td>
                        <div style="background-color: #f0f0f0; border-radius: 5px; height: 10px;">
                            <div style="background-color: #4a6bff; width: ${round.progress}%; height: 100%; border-radius: 5px;"></div>
                        </div>
                        ${round.progress}%
                    </td>
                    <td>Active</td>
                    <td>
                        <button style="padding: 3px 8px; margin-right: 5px;">View</button>
                        <button style="padding: 3px 8px;">Edit</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Switch between content sections
        function switchSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update main title
            const title = document.querySelector(`.menu-item[data-section="${sectionId}"] span`).textContent;
            document.getElementById('main-title').textContent = title + ' Dashboard';
            
            // Initialize charts for the section if needed
            if (sectionId === 'reports') {
                initTeamGrowthChart();
                initCommissionChart();
                generateReportData();
            } else if (sectionId === 'transactions') {
                generateTransactionData();
            } else if (sectionId === 'leaderboard') {
                generateLeaderboardData();
            } else if (sectionId === 'add-round') {
                generateActiveRoundsData();
            }
        }

        // Initialize the dashboard when the page loads
        window.onload = function() {
            // Add sample data to the tree
            addSampleData();
            
            // Initialize visualizations
            initTree();
            initSalesChart();
            
            // Set up menu interactions
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    const sectionId = this.getAttribute('data-section');
                    switchSection(sectionId);
                });
            });
            
            // Set up tree controls
            document.getElementById('zoomIn').addEventListener('click', zoomIn);
            document.getElementById('zoomOut').addEventListener('click', zoomOut);
            document.getElementById('resetZoom').addEventListener('click', resetZoom);
            
            // Set up add user button
            document.getElementById('addUser').addEventListener('click', function() {
                const userId = document.getElementById('userId').value;
                const userName = document.getElementById('userName').value;
                const sponsorId = document.getElementById('sponsorId').value;
                const position = document.getElementById('position').value;
                
                if (!userId || !userName || !sponsorId) {
                    alert("Please fill all fields!");
                    return;
                }
                
                if (addUser(userId, userName, sponsorId, position)) {
                    // Clear form
                    document.getElementById('userId').value = '';
                    document.getElementById('userName').value = '';
                }
            });
            
            // Set up other buttons
            document.getElementById('export-report').addEventListener('click', function() {
                alert('Report exported successfully!');
            });
            
            document.getElementById('create-round').addEventListener('click', function() {
                alert('Sales round created successfully!');
                generateActiveRoundsData();
            });
            
            document.getElementById('save-profile').addEventListener('click', function() {
                alert('Profile saved successfully!');
            });
            
            document.getElementById('change-password').addEventListener('click', function() {
                alert('Password changed successfully!');
            });
            
            document.getElementById('save-preferences').addEventListener('click', function() {
                alert('Preferences saved successfully!');
            });
            
            document.getElementById('save-security').addEventListener('click', function() {
                alert('Security settings saved successfully!');
            });
        };
    </script>
</body>
</html>